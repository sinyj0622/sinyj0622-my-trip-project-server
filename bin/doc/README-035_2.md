# 35_2 - Connection을 스레드에 보관하기: 한 스레드에서 Connection 을 여러 번 사용할 때 발생하는 문제점 해결하기

- Connection을 close() 하면 DBMS와의 연결이 끊어짐을 이해하기
- Proxy 설계 기법(design pattern)을 이용하여 Connection의 close()를 커스터마이징 하기

### 해결책

- Connection을 사용하고 난 후에 닫지 않게 한다.
- 방법1: 
  - try-with-resources 블럭 밖에 Connection 변수를 둔다.
  - 그래서 Connection 객체가 자동으로 닫히지 않게 한다.
  - 문제: 
    - 기존의 표준 코딩 방식에 어긋난다.
    - 즉 자원을 사용했으면 닫도록 코딩하는 게 일반적이다.
    - 이렇게 스레드에서 커넥션을 여러 번 사용하는 경우라고 해서 
      특별하게 코딩한다면 유지보수 하기가 어렵다.
- 방법2:
  - Connection 객체를 커스터마이징 한다.
  - close()가 호출될 때 진짜로 닫지는 않는다.
  - 기존 표준 코딩에 어긋나지 않는다.
  - 즉 자원을 사용했으면 닫도록 코딩하는 규칙을 준수하고 있다.
  - 다만 중간에서 '조작질'을 할 뿐이다.

 